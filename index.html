<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>LaTeX тренажёр</title>

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css">

  <style>
    :root{
      --bg:#e5e5e5;
      --panel:#d6d6d6;
      --panel2:#cfcfcf;
      --border:#bdbdbd;
      --text:#2b2b2b;
      --muted:#666;
      --r:6px;
      --gap:14px;
      --max:1000px;
      --font:system-ui,-apple-system,"Segoe UI",Roboto,Arial,sans-serif;
      --mono:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;
    }

    *{box-sizing:border-box}
    body{margin:0;background:var(--bg);color:var(--text);font-family:var(--font)}
    .wrap{max-width:var(--max);margin:0 auto;padding:20px}
    .header{padding:16px;background:var(--panel);border:1px solid var(--border);border-radius:var(--r);margin-bottom:var(--gap)}
    .grid{display:grid;grid-template-columns:1fr 1fr;gap:var(--gap)}
    @media(max-width:900px){.grid{grid-template-columns:1fr}}

    .card{background:var(--panel);border:1px solid var(--border);border-radius:var(--r);padding:16px}
    h2{margin:0 0 10px;font-size:16px;font-weight:600}

    textarea,select,button,input{
      width:100%;
      border:1px solid var(--border);
      border-radius:var(--r);
      background:var(--panel2);
      color:var(--text);
      padding:10px 12px;
      font:14px var(--mono);
      outline:0;
    }
    textarea{min-height:200px;resize:vertical}
    .row{display:flex;gap:10px;margin-top:10px}
    .row>*{flex:1}

    .out{
      background:#fff;
      border:1px solid var(--border);
      border-radius:var(--r);
      padding:12px;
      min-height:200px;
      overflow:auto;
      font-size:1.3em;
    }

    .err{
      margin-top:10px;
      padding:10px 12px;
      border-radius:var(--r);
      border:1px solid var(--border);
      background:var(--panel2);
      font:12px var(--mono);
      color:#3a1f1f;
      white-space:pre-wrap;
      display:none;
    }

    .help{
      margin-top:12px;
      padding:12px;
      background:#ececec;
      border:1px solid var(--border);
      border-radius:var(--r);
      font:12px var(--mono);
      color:#333;
    }
    .help b{display:block;font-weight:600;font-size:13px;margin-bottom:6px}

    .help-search{
      height:30px;
      padding:6px 8px;
      border-radius:4px;
      border:1px solid var(--border);
      background:#fff;
      font:12px var(--mono);
      color:#333;
      margin:6px 0 10px;
    }
    .help-search::placeholder{color:#777}

    .help-stack{
      position:relative;
      min-height:160px;
      border:1px solid #c8c8c8;
      background:#f3f3f3;
      border-radius:4px;
      padding:6px;
    }
    .help-pane{display:flex;flex-direction:column;gap:4px}
    .help-pane.overlay{
      position:absolute;
      inset:6px;
      border-radius:4px;
      background:#f3f3f3;
      overflow:auto;
    }
    .help-item{
      font:12px var(--mono);
      padding:3px 6px;
      border-radius:4px;
      cursor:pointer;
    }
    .help-item:hover{background:#dddddd}

    .help-overlay-title{
      font:12px var(--mono);
      color:#555;
      padding:3px 6px 6px;
      border-bottom:1px solid #d0d0d0;
      margin-bottom:4px;
      position:sticky;
      top:0;
      background:#f3f3f3;
    }
  </style>
</head>
<body>

<div class="wrap">
  <div class="header">
    <b>LaTeX тренажёр</b>
    <div style="font-size:13px;color:#666;margin-top:4px">Ввод формулы → KaTeX рендер. Поиск по встроенной базе.</div>
  </div>

  <div class="grid">
    <div class="card">
      <h2>Ввод</h2>

      <textarea id="src">\frac{a^2+b^2}{c}</textarea>

      <div class="row">
        <select id="mode">
          <option value="display">display (блок)</option>
          <option value="inline">inline (строка)</option>
        </select>
        <button id="clear" type="button">clear</button>
      </div>

      <div class="help">
        <b>LaTeX справка</b>

        <input id="helpSearch" class="help-search" type="text" placeholder="поиск по базе TeX…" autocomplete="off">

        <div class="help-stack">
          <div id="helpBase" class="help-pane">
            <div class="help-item base" data-tex="\\frac{a}{b}">\frac{a}{b} — дробь</div>
            <div class="help-item base" data-tex="\\sqrt{x}">\sqrt{x} — корень</div>
            <div class="help-item base" data-tex="a^2 , a_i">a^2 , a_i — степень и индекс</div>
            <div class="help-item base" data-tex="\\sum_{i=1}^n">\sum_{i=1}^n — сумма</div>
            <div class="help-item base" data-tex="\\int_a^b">\int_a^b — интеграл</div>
            <div class="help-item base" data-tex="\\frac{d}{dx}">\frac{d}{dx} — производная</div>
            <div class="help-item base" data-tex="\\pi \\alpha \\beta">\pi \alpha \beta — греческие</div>
          </div>

          <div id="helpOverlay" class="help-pane overlay" style="display:none">
            <div class="help-overlay-title">Результаты</div>
            <div id="helpResults"></div>
          </div>
        </div>
      </div>
    </div>

    <div class="card">
      <h2>Вывод</h2>
      <div id="out" class="out"></div>
      <div id="err" class="err"></div>
    </div>
  </div>
</div>



<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.js"></script>
<script>
  const src = document.getElementById("src");
  const out = document.getElementById("out");
  const err = document.getElementById("err");
  const mode = document.getElementById("mode");
  const clearBtn = document.getElementById("clear");

  // helpData: шпаргалка по ТЕХУ/KaTeX (как записывать), а не по формулам
// вставь вместо текущего helpData
const helpData = [
  // --- Core structure ---
  { tex:"x^2", title:"степень", keys:["power","exponent","степень","^"] },
  { tex:"x_{i}", title:"нижний индекс", keys:["subscript","index","нижний","_"] },
  { tex:"x_i^2", title:"индекс + степень", keys:["subscript","superscript","индекс","степень"] },
  { tex:"x_{i,j}", title:"индекс с запятой", keys:["index","subscript","i,j"] },
  { tex:"x^{n+1}", title:"степень со скобками", keys:["exponent","braces","скобки"] },
  { tex:"\\frac{a}{b}", title:"дробь", keys:["frac","fraction","дробь"] },
  { tex:"\\dfrac{a}{b}", title:"крупная дробь (display)", keys:["dfrac","display fraction","крупная дробь"] },
  { tex:"\\tfrac{a}{b}", title:"мелкая дробь (inline)", keys:["tfrac","inline fraction","мелкая дробь"] },
  { tex:"\\cfrac{a}{b}", title:"цепная дробь (лучше выравнивает)", keys:["cfrac","continued fraction","цепная дробь"] },
  { tex:"\\sqrt{x}", title:"квадратный корень", keys:["sqrt","root","корень"] },
  { tex:"\\sqrt[n]{x}", title:"корень n-й степени", keys:["nth root","sqrt[n]","корень n"] },
  { tex:"\\left|x\\right|", title:"модуль (авторазмер)", keys:["abs","| |","left right","модуль"] },
  { tex:"\\lvert x\\rvert", title:"модуль (фикс. символы)", keys:["lvert rvert","abs","модуль"] },

  // --- Delimiters / sizing ---
  { tex:"\\left( \\frac{a}{b} \\right)", title:"скобки авторазмер", keys:["left right","parentheses","скобки"] },
  { tex:"\\big( x \\big)", title:"скобки big", keys:["big","delimiters","скобки"] },
  { tex:"\\Big( x \\Big)", title:"скобки Big", keys:["Big","delimiters","скобки"] },
  { tex:"\\bigg( x \\bigg)", title:"скобки bigg", keys:["bigg","delimiters","скобки"] },
  { tex:"\\Bigg( x \\Bigg)", title:"скобки Bigg", keys:["Bigg","delimiters","скобки"] },
  { tex:"\\left\\{ x \\right\\}", title:"фигурные скобки (экранировать)", keys:["{ }","brace","фигурные"] },
  { tex:"\\langle a,b\\rangle", title:"угловые скобки ⟨ ⟩", keys:["langle rangle","inner product","угловые"] },
  { tex:"\\lfloor x\\rfloor", title:"пол", keys:["floor","lfloor rfloor","пол"] },
  { tex:"\\lceil x\\rceil", title:"потолок", keys:["ceil","lceil rceil","потолок"] },

  // --- Spacing / punctuation ---
  { tex:"a\\,b", title:"тонкий пробел \\,", keys:["thin space","\\,","пробел"] },
  { tex:"a\\;b", title:"средний пробел \\;", keys:["space","\\;","пробел"] },
  { tex:"a\\quad b", title:"quad", keys:["quad","space","пробел"] },
  { tex:"a\\qquad b", title:"qquad", keys:["qquad","space","пробел"] },
  { tex:"a\\!b", title:"отрицательный пробел \\!", keys:["negative space","\\!","уплотнить"] },
  { tex:"\\cdot", title:"точка умножения", keys:["cdot","multiply","умножение"] },
  { tex:"\\times", title:"крест умножения ×", keys:["times","multiply","умножение"] },

  // --- Text in math / fonts ---
  { tex:"\\text{текст}", title:"текст внутри формулы", keys:["text","\\text","надпись"] },
  { tex:"\\mathrm{d}x", title:"прямой d в dx", keys:["mathrm","dx","дифференциал"] },
  { tex:"\\mathit{x}", title:"курсив (обычно по умолчанию)", keys:["mathit","italic","курсив"] },
  { tex:"\\mathbf{x}", title:"жирный (вектор/матрица)", keys:["mathbf","bold","жирный"] },
  { tex:"\\boldsymbol{\\alpha}", title:"жирная греческая", keys:["boldsymbol","greek bold","жирная греческая"] },
  { tex:"\\mathbb{R}", title:"blackboard bold (множества)", keys:["mathbb","R","set"] },
  { tex:"\\mathcal{F}", title:"каллиграфия", keys:["mathcal","calligraphic","каллиграфия"] },
  { tex:"\\mathfrak{g}", title:"фрактур", keys:["mathfrak","fraktur","фрактур"] },
  { tex:"\\underline{x}", title:"подчеркнуть", keys:["underline","подчеркнуть"] },
  { tex:"\\overline{x}", title:"черта сверху", keys:["overline","bar","черта"] },

  // --- Accents / hats / vectors ---
  { tex:"\\vec{v}", title:"стрелка над вектором", keys:["vec","vector","вектор"] },
  { tex:"\\overrightarrow{AB}", title:"вектор AB (длинная стрелка)", keys:["overrightarrow","vector AB","AB"] },
  { tex:"\\hat{x}", title:"шляпка (hat)", keys:["hat","unit vector","шляпка"] },
  { tex:"\\widehat{ABC}", title:"широкая шляпка", keys:["widehat","hat","широкая"] },
  { tex:"\\tilde{x}", title:"тильда", keys:["tilde","~","тильда"] },
  { tex:"\\widetilde{f}", title:"широкая тильда", keys:["widetilde","тильда широкая"] },
  { tex:"\\dot{x}", title:"точка сверху", keys:["dot","time derivative","точка"] },
  { tex:"\\ddot{x}", title:"две точки сверху", keys:["ddot","вторая производная","две точки"] },
  { tex:"\\bar{x}", title:"короткая черта", keys:["bar","черта"] },

  // --- Equality / relations / arrows ---
  { tex:"a\\ne b", title:"не равно", keys:["neq","not equal","не равно"] },
  { tex:"a\\approx b", title:"примерно равно", keys:["approx","примерно"] },
  { tex:"a\\equiv b", title:"тождественно / по модулю", keys:["equiv","identity","тождественно"] },
  { tex:"a\\propto b", title:"пропорционально", keys:["propto","пропорционально"] },
  { tex:"a\\le b", title:"≤", keys:["le","<=","≤"] },
  { tex:"a\\ge b", title:"≥", keys:["ge",">=","≥"] },
  { tex:"\\to", title:"стрелка →", keys:["to","arrow","->"] },
  { tex:"\\Rightarrow", title:"импликация ⇒", keys:["Rightarrow","implies","=>"] },
  { tex:"\\Leftrightarrow", title:"эквивалентность ⇔", keys:["Leftrightarrow","iff","<=>"] },
  { tex:"\\mapsto", title:"отображение ↦", keys:["mapsto","mapping"] },
  { tex:"\\longrightarrow", title:"длинная стрелка", keys:["longrightarrow","arrow long"] },

  // --- Sets / logic / quantifiers ---
  { tex:"x\\in A", title:"принадлежит ∈", keys:["in","element","∈"] },
  { tex:"x\\notin A", title:"не принадлежит ∉", keys:["notin","∉"] },
  { tex:"A\\subseteq B", title:"подмножество ⊆", keys:["subseteq","⊆"] },
  { tex:"A\\supseteq B", title:"надмножество ⊇", keys:["supseteq","⊇"] },
  { tex:"A\\cup B", title:"объединение ∪", keys:["cup","union","∪"] },
  { tex:"A\\cap B", title:"пересечение ∩", keys:["cap","intersection","∩"] },
  { tex:"A\\setminus B", title:"разность множеств", keys:["setminus","difference"] },
  { tex:"\\varnothing", title:"пустое множество ∅", keys:["varnothing","empty set","∅"] },
  { tex:"\\forall x\\,P(x)", title:"квантор всеобщности ∀", keys:["forall","∀"] },
  { tex:"\\exists x\\,P(x)", title:"квантор существования ∃", keys:["exists","∃"] },
  { tex:"\\neg p", title:"НЕ (¬)", keys:["neg","not","¬"] },
  { tex:"p\\land q", title:"И (∧)", keys:["land","and","∧"] },
  { tex:"p\\lor q", title:"ИЛИ (∨)", keys:["lor","or","∨"] },

  // --- Sums / products / limits ---
  { tex:"\\sum_{k=1}^{n} a_k", title:"сумма (снизу/сверху)", keys:["sum","Sigma","сумма"] },
  { tex:"\\prod_{k=1}^{n} a_k", title:"произведение Π", keys:["prod","product","произведение"] },
  { tex:"\\lim_{x\\to 0} f(x)", title:"предел", keys:["lim","limit","предел"] },
  { tex:"\\displaystyle \\sum_{k=1}^{n} a_k", title:"принудительно display-стиль", keys:["displaystyle","display style"] },
  { tex:"\\textstyle \\sum_{k=1}^{n} a_k", title:"принудительно text-стиль", keys:["textstyle","text style"] },

  // --- Integrals / calculus ---
  { tex:"\\int f(x)\\,dx", title:"неопределённый интеграл", keys:["int","integral","dx"] },
  { tex:"\\int_{a}^{b} f(x)\\,dx", title:"определённый интеграл", keys:["definite integral","a b"] },
  { tex:"\\iint_D f\\,dA", title:"двойной интеграл", keys:["iint","double integral"] },
  { tex:"\\iiint_V f\\,dV", title:"тройной интеграл", keys:["iiint","triple integral"] },
  { tex:"\\oint_C f\\,ds", title:"контурный интеграл", keys:["oint","line integral","контурный"] },
  { tex:"\\frac{d}{dx}f(x)", title:"обычная производная", keys:["d/dx","derivative"] },
  { tex:"\\frac{\\partial}{\\partial x}f", title:"частная производная", keys:["partial","∂","частная"] },
  { tex:"\\nabla f", title:"градиент (набла)", keys:["nabla","gradient","∇"] },
  { tex:"\\nabla\\cdot \\vec{F}", title:"дивергенция", keys:["divergence","nabla dot"] },
  { tex:"\\nabla\\times \\vec{F}", title:"ротор", keys:["curl","nabla times"] },

  // --- Fractions/derivatives variants ---
  { tex:"f'(x)", title:"производная (штрих)", keys:["prime","f'","штрих"] },
  { tex:"f''(x)", title:"вторая производная", keys:["second derivative","double prime"] },
  { tex:"\\dot{x}", title:"производная по времени (dot)", keys:["dot","time derivative"] },
  { tex:"\\ddot{x}", title:"вторая по времени (ddot)", keys:["ddot","time second"] },

  // --- Functions / operators formatting ---
  { tex:"\\sin x", title:"sin (как оператор)", keys:["sin","operator"] },
  { tex:"\\cos x", title:"cos", keys:["cos","operator"] },
  { tex:"\\tan x", title:"tan", keys:["tan","operator"] },
  { tex:"\\ln x", title:"ln", keys:["ln","log"] },
  { tex:"\\log_a x", title:"логарифм по основанию a", keys:["log_a","log base"] },
  { tex:"\\exp(x)", title:"exp(x)", keys:["exp","exponential"] },
  { tex:"\\max_{x} f(x)", title:"max с индексом", keys:["max","argmax style"] },
  { tex:"\\operatorname{rank}(A)", title:"свой оператор (rank)", keys:["operatorname","rank"] },

  // --- Piecewise / cases / alignment ---
  { tex:"\\begin{cases}x,&x\\ge 0\\\\-x,&x<0\\end{cases}", title:"кусочная функция (cases)", keys:["cases","piecewise","кусочная"] },
  { tex:"\\begin{aligned}a&=b+c\\\\&=d\\end{aligned}", title:"выравнивание по & (aligned)", keys:["aligned","ampersand","align"] },
  { tex:"\\begin{array}{l}line 1\\\\line 2\\end{array}", title:"array (табличка в формуле)", keys:["array","table"] },
  { tex:"\\begin{array}{cc}a&b\\\\c&d\\end{array}", title:"array 2×2", keys:["array","matrix-like"] },

  // --- Matrices ---
  { tex:"\\begin{pmatrix}a&b\\\\c&d\\end{pmatrix}", title:"матрица (круглые скобки)", keys:["pmatrix","matrix"] },
  { tex:"\\begin{bmatrix}a&b\\\\c&d\\end{bmatrix}", title:"матрица (квадратные скобки)", keys:["bmatrix","matrix"] },
  { tex:"\\begin{Bmatrix}a&b\\\\c&d\\end{Bmatrix}", title:"матрица (фигурные скобки)", keys:["Bmatrix","matrix"] },
  { tex:"\\begin{vmatrix}a&b\\\\c&d\\end{vmatrix}", title:"определитель | |", keys:["vmatrix","determinant"] },
  { tex:"\\begin{Vmatrix}a&b\\\\c&d\\end{Vmatrix}", title:"норма матрицы || ||", keys:["Vmatrix","norm"] },
  { tex:"\\begin{matrix}a&b\\\\c&d\\end{matrix}", title:"матрица без скобок (matrix)", keys:["matrix env","no brackets"] },
  { tex:"\\begin{pmatrix}a_{11}&a_{12}\\\\a_{21}&a_{22}\\end{pmatrix}", title:"матрица с индексами", keys:["a_{ij}","matrix indices"] },

  // --- Vectors / dot / cross ---
  { tex:"\\vec{a}\\cdot\\vec{b}", title:"скалярное произведение", keys:["dot product","\\cdot"] },
  { tex:"\\vec{a}\\times\\vec{b}", title:"векторное произведение", keys:["cross product","\\times"] },
  { tex:"\\langle \\vec{a},\\vec{b}\\rangle", title:"скалярное (⟨a,b⟩)", keys:["inner product","langle"] },

  // --- Complex numbers ---
  { tex:"z=a+bi", title:"комплексное число", keys:["complex","a+bi"] },
  { tex:"\\Re(z)", title:"действительная часть", keys:["Re","real part"] },
  { tex:"\\Im(z)", title:"мнимая часть", keys:["Im","imag part"] },
  { tex:"\\overline{z}", title:"комплексное сопряжение", keys:["conjugate","overline"] },
  { tex:"|z|", title:"модуль комплексного", keys:["abs complex","|z|"] },

  // --- Big-O / asymptotics ---
  { tex:"O(n)", title:"O-большое", keys:["big O","complexity","O(n)"] },
  { tex:"o(n)", title:"o-малое", keys:["little o","asymptotic"] },
  { tex:"\\Theta(n)", title:"Тета", keys:["Theta","Theta(n)"] },

  // --- Probability / stats notation ---
  { tex:"P(A\\mid B)", title:"условная вероятность", keys:["conditional probability","|"] },
  { tex:"\\mathbb{E}[X]", title:"матожидание", keys:["expectation","E[X]"] },
  { tex:"\\mathrm{Var}(X)", title:"дисперсия", keys:["variance","Var"] },
  { tex:"\\sigma^2", title:"дисперсия (σ²)", keys:["sigma^2","variance"] },

  // --- Number theory / modular ---
  { tex:"a\\equiv b\\pmod{n}", title:"сравнение по модулю", keys:["mod","pmod","congruence"] },
  { tex:"\\gcd(a,b)", title:"НОД", keys:["gcd","greatest common divisor"] },
  { tex:"\\operatorname{lcm}(a,b)", title:"НОК (lcm)", keys:["lcm","least common multiple","operatorname"] },

  // --- Dots / ellipsis ---
  { tex:"a_1,a_2,\\ldots,a_n", title:"многоточие (в строку)", keys:["ldots","ellipsis"] },
  { tex:"a_1+a_2+\\cdots+a_n", title:"точки по центру", keys:["cdots","ellipsis"] },
  { tex:"\\vdots", title:"вертикальные точки", keys:["vdots"] },
  { tex:"\\ddots", title:"диагональные точки", keys:["ddots"] },

  // --- Special symbols ---
  { tex:"\\infty", title:"бесконечность", keys:["infty","infinity"] },
  { tex:"\\angle", title:"угол ∠", keys:["angle"] },
  { tex:"\\degree", title:"градусы (если поддерживается)", keys:["degree","°"] },
  { tex:"\\ldots", title:"…", keys:["...","dots"] },

  // --- Styling / display tricks (KaTeX) ---
  { tex:"\\displaystyle \\int_0^1 f(x)\\,dx", title:"заставить display-стиль", keys:["displaystyle","bigger integral"] },
  { tex:"\\textstyle \\frac{a}{b}", title:"заставить text-стиль", keys:["textstyle","smaller fraction"] },
  { tex:"\\color{red}{x}", title:"цвет текста (KaTeX)", keys:["color","red","style"] },
  { tex:"\\bbox[5px,border:1px solid #aaa]{x}", title:"рамка/бокс (KaTeX bbox)", keys:["bbox","box","border"] },
  { tex:"\\cancel{x}", title:"зачеркнуть (если включено)", keys:["cancel","strike"] }
];


  let t = 0;

  function renderNow(){
    err.style.display="none";
    try{
      katex.render(src.value, out, {displayMode: mode.value==="display", throwOnError:true});
    }catch(e){
      out.textContent="";
      err.style.display="block";
      err.textContent=String(e);
    }
  }

  function schedule(){
    clearTimeout(t);
    t=setTimeout(renderNow,60);
  }

  src.addEventListener("input", schedule);
  mode.addEventListener("change", renderNow);
  clearBtn.addEventListener("click", ()=>{ src.value=""; renderNow(); });
  document.addEventListener("DOMContentLoaded", renderNow);

  const helpSearch = document.getElementById("helpSearch");
  const helpBase = document.getElementById("helpBase");
  const helpOverlay = document.getElementById("helpOverlay");
  const helpResults = document.getElementById("helpResults");
  const baseItems = document.querySelectorAll("#helpBase .help-item");

  function insertTex(tex){
    if(!tex) return;
    const start = src.selectionStart;
    const end = src.selectionEnd;
    src.value = src.value.slice(0, start) + tex + src.value.slice(end);
    src.selectionStart = src.selectionEnd = start + tex.length;
    src.focus();
    schedule();
  }

  baseItems.forEach(el => el.addEventListener("click", () => insertTex(el.getAttribute("data-tex") || "")));

  function setSearchMode(on){
    helpBase.style.visibility = on ? "hidden" : "visible";
    helpOverlay.style.display = on ? "block" : "none";
  }

  
  function renderResults(q){
    helpResults.innerHTML = "";
    const qq = q.trim().toLowerCase();

    if(!qq){
      setSearchMode(false);
      return;
    }
    setSearchMode(true);

    let shown = 0;
    for(const it of helpData){
      const tex = it.tex || "";
      const title = it.title || "";
      const keys = Array.isArray(it.keys) ? it.keys.join(" ") : "";
      const hay = (tex + " " + title + " " + keys).toLowerCase();

      if(!hay.includes(qq)) continue;

      const div = document.createElement("div");
      div.className = "help-item";
      div.textContent = tex + " — " + title;
      div.addEventListener("click", () => insertTex(tex));
      helpResults.appendChild(div);

      shown++;
      if(shown >= 120) break;
    }

    if(shown === 0){
      const div = document.createElement("div");
      div.style.cssText = "font:12px var(--mono); color:#666; padding:6px;";
      div.textContent = "Ничего не найдено";
      helpResults.appendChild(div);
    }
  }

  helpSearch.addEventListener("input", e => renderResults(e.target.value));
</script>

</body>
</html>
